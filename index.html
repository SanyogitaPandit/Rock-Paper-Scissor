<script>
    function isValidChoise(choise)
    {
        let choiseStr = choise.trim().toLowerCase();

        if(choiseStr === "rock" || choiseStr === "paper" || choiseStr === "scissor")
        {
            return true;
        }
        else
        {
            return false;
        }
    }

    function computerPlay()
    {
        let choiseNum = Math.floor(Math.random() * 10) % 3; // Get a random integer from 0 to 2

        let compChoise;
        switch(choiseNum)
        {
            case 0:
                compChoise = "rock";
                break;
            case 1:
                compChoise = "paper";
                break;
            case 2:
                compChoise = "scissor";
            //    break;
            //default:
            //    compChoise = "rock";
        }

        return compChoise;
    }

    function playRound(userSel, compSel)
    {
        let userSelStr = userSel.trim().toLowerCase();
        //let compSelStr = compSel.trim().toLowerCase();  

        if(userSelStr === compSel)
        {
            return ("Game Draw. " + userSel + " Vs " + compSel);
        }

        let combinationStr = userSelStr + compSel;
        let winnerStr; 
        
        if(combinationStr === "rockpaper" || combinationStr === "paperrock")
        {
            winnerStr = "paper";
        }
        else if(combinationStr === "paperscissor" || combinationStr === "scissorpaper")
        {
            winnerStr = "scissor";
        }
        else
        {
            winnerStr = "rock";
        }

        if(userSelStr === winnerStr)
        {
            return ("You win : " + userSel + " beats " + compSel);
        }
        else
        {
            return ("You lose : " + compSel + " beats " + userSel);   
        }
    }

    let rounds = null;
    let userSel = null;

    do
    {
        rounds = prompt("Enter number of rounds to be played : ");        
    }
    while(rounds != null && isNaN(rounds = parseInt(rounds)))

    let userWin = 0;
    let compWin = 0;
    let roundsDescending = 0;
    while(rounds != null && rounds > 0)
    {
        rounds--;

        do
        {
            userSel = prompt("Please enter your choise (either rock, paper or scissor): ");        
        }
        while(userSel != null && !isValidChoise(userSel))

        if(userSel != null)
        {            
            let compSel = computerPlay();
            let winnerStr = playRound(userSel, compSel);
            console.log("Round " + ++roundsDescending + " : " + winnerStr);
            if(winnerStr.search("win") != -1)
            {
                userWin++;
            }
            else if(winnerStr.search("lose") != -1)
            {
                compWin++;
            }            
        }
        else
        {
            break;
        }
    }

    if(userWin > compWin)
    {
        console.log("You win the game!");
    }
    else if(compWin > userWin)
    {
        console.log("You lose the game!");
    }
    else
    {
        console.log("DRAW!");
    }

</script>